import os
import telebot
from dotenv import load_dotenv

load_dotenv()
TOKEN = os.getenv("BOT_TOKEN")

bot = telebot.TeleBot(TOKEN)

# –ü—Ä–æ—Å—Ç–∏–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ü—ñ–ª—å–æ–≤–æ—ó –∞—É–¥–∏—Ç–æ—Ä—ñ—ó –∑–∞ –∫–ª—é—á–æ–≤–∏–º–∏ —Å–ª–æ–≤–∞–º–∏
niche_audiences = {
    "–∞–∫—Å–µ—Å—É–∞—Ä–∏": "–ú–æ–ª–æ–¥—å 16‚Äì35 —Ä–æ–∫—ñ–≤, –≤–ª–∞—Å–Ω–∏–∫–∏ iPhone, –∂–∏—Ç–µ–ª—ñ –º—ñ—Å—Ç, —Å–ª—ñ–¥–∫—É—é—Ç—å –∑–∞ —Ç—Ä–µ–Ω–¥–∞–º–∏",
    "–∫–æ—Å–º–µ—Ç–∏–∫–∞": "–ñ—ñ–Ω–∫–∏ 18‚Äì45 —Ä–æ–∫—ñ–≤, –∑–∞—Ü—ñ–∫–∞–≤–ª–µ–Ω—ñ –≤ –¥–æ–≥–ª—è–¥—ñ –∑–∞ —Å–æ–±–æ—é, —ñ–Ω—Å—Ç–∞–≥—Ä–∞–º-–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ",
    "–æ–¥—è–≥": "–ß–æ–ª–æ–≤—ñ–∫–∏ —ñ –∂—ñ–Ω–∫–∏ 18‚Äì35 —Ä–æ–∫—ñ–≤, —Ü—ñ–Ω—É—é—Ç—å —Å—Ç–∏–ª—å, –æ–Ω–ª–∞–π–Ω-—à–æ–ø—ñ–Ω–≥",
    "–∫—É—Ä—Å–∏": "–î–æ—Ä–æ—Å–ª—ñ 20‚Äì40 —Ä–æ–∫—ñ–≤, —Ö–æ—á—É—Ç—å –ø—Ä–æ–∫–∞—á–∞—Ç–∏ –Ω–∞–≤–∏—á–∫–∏, —à—É–∫–∞—é—Ç—å —Å–∞–º–æ—Ä–æ–∑–≤–∏—Ç–æ–∫",
    "–¥–∏—Ç—è—á—ñ —Ç–æ–≤–∞—Ä–∏": "–ú–∞–º–∏ 25‚Äì40 —Ä–æ–∫—ñ–≤, —Ç—É—Ä–±–æ—Ç–ª–∏–≤—ñ, –∞–∫—Ç–∏–≤–Ω—ñ –≤ —Å–æ—Ü–º–µ—Ä–µ–∂–∞—Ö",
}

@bot.message_handler(commands=['start'])
def start_message(message):
    bot.send_message(message.chat.id, "–ü—Ä–∏–≤—ñ—Ç! ü§ñ –Ø –¥–æ–ø–æ–º–æ–∂—É –ø—Ä–∏–¥—É–º–∞—Ç–∏ –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –ø—Ä–æ—Å—É–≤–∞–Ω–Ω—è —Ç–≤–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É. –ù–∞–ø–∏—à–∏, —â–æ —Ç–∏ –ø—Ä–æ–¥–∞—î—à –∞–±–æ —è–∫—É –ø–æ—Å–ª—É–≥—É –Ω–∞–¥–∞—î—à.")

@bot.message_handler(func=lambda m: True)
def handle_business_info(message):
    business = message.text.lower()
    
    # –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ü—ñ–ª—å–æ–≤–æ—ó –∞—É–¥–∏—Ç–æ—Ä—ñ—ó
    audience = "–õ—é–¥–∏, –∑–∞—Ü—ñ–∫–∞–≤–ª–µ–Ω—ñ —É –≤–∞—à–æ–º—É –ø—Ä–æ–¥—É–∫—Ç—ñ."
    for keyword, target in niche_audiences.items():
        if keyword in business:
            audience = target
            break

    # –í—ñ–¥–ø–æ–≤—ñ–¥—ñ –±–æ—Ç–∞
    bot.send_message(message.chat.id, f"üéØ –¶—ñ–ª—å–æ–≤–∞ –∞—É–¥–∏—Ç–æ—Ä—ñ—è –¥–ª—è –≤–∞—à–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É:\n{audience}")

    content = f"üìù –ö–æ–Ω—Ç–µ–Ω—Ç-—ñ–¥–µ—è:\n–†–æ–∑–∫–∞–∂—ñ—Ç—å, —è–∫ –≤–∞—à –ø—Ä–æ–¥—É–∫—Ç –≤–∏—Ä—ñ—à—É—î –ø—Ä–æ–±–ª–µ–º—É –∫–ª—ñ—î–Ω—Ç–∞. –ù–∞–ø—Ä–∏–∫–ª–∞–¥: \"–ß–æ–º—É –Ω–∞—à—ñ {business} ‚Äî must-have —É 2025 —Ä–æ—Ü—ñ?\""
    tiktok = f"üé• –Ü–¥–µ—è –¥–ª—è TikTok:\n–ü–æ–∫–∞–∂—ñ—Ç—å –∫–æ—Ä–æ—Ç–∫–µ –≤—ñ–¥–µ–æ –∑ –ø—Ä–æ—Ü–µ—Å–æ–º –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∞–±–æ –¥–æ/–ø—ñ—Å–ª—è –∑ –≤–∞—à–∏–º –ø—Ä–æ–¥—É–∫—Ç–æ–º ({business})."

    bot.send_message(message.chat.id, content)
    bot.send_message(message.chat.id, tiktok)

if __name__ == '__main__':
    bot.polling(none_stop=True)
